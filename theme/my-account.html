<!DOCTYPE html>

<html lang="es" ng-app="LaMaceta">

<head>
  <script src="../bower_components/angular/angular.js" type="text/javascript"></script>
  <script src="../bower_components/angular-bootstrap/ui-bootstrap.js" type="text/javascript"></script>
  <script src="../bower_components/angular-bootstrap/ui-bootstrap-tpls.js" type="text/javascript"></script>


  <script src="../js/angular-cookies.js"></script>
  <script src="../bower_components/ng-table/dist/ng-table.js" type="text/javascript"></script>
  <script src="../bower_components/ng-file-upload/ng-file-upload.min.js" type="text/javascript"></script>
  <script src="../js/checklist-model.js"></script>
  <script src="../js/angular-cookies.js"></script>
  <script src="../bower_components/angular-animate/angular-animate.min.js" type="text/javascript"></script>
  <script src="../bower_components/angular-sanitize/angular-sanitize.min.js" type="text/javascript"></script>
  <script src="../bower_components/satellizer/dist/satellizer.js"></script>
  <script type="text/javascript" src="../bower_components/angular-md5/angular-md5.js"></script>


  <script src="../js/app/app.js"></script>
  
  <script src="../js/controller/AccountController.js"></script>
  <script src="../js/service/AccountService.js"></script>
  <script src="../js/service/AdminService.js"></script>

  <!--SI, USA EL DE ADMIN PARA NO REPETIR CODIGO-->
  <script src="../js/controller/SubCtrlAdmin/EditProfile.js"></script>
  <!--SI, USA EL DE ADMIN PARA NO REPETIR CODIGO-->

  <script src="../js/controller/PreheaderController.js"></script>
  <script src="../js/service/CartService.js"></script>
  <script src="../js/controller/CartController.js"></script>
  <script src="../js/controller/PreheaderController.js"></script>
  
  <script src="../js/service/MailService.js"></script>

  <script src="../js/controller/SearchController.js"></script>
  <script src="../js/service/SearchService.js"></script>



  <meta charset="utf-8">
  <title>Mi Cuenta | LaMaceta</title>

  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">


  <!-- Fonts START -->
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|PT+Sans+Narrow|Source+Sans+Pro:200,300,400,600,700,900&amp;subset=all" rel="stylesheet" type="text/css"> 
  <!-- Fonts END -->

  <!-- Global styles START -->          
  <link href="assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!-- Global styles END --> 
   
  <!-- Page level plugin styles START -->
  <link href="assets/plugins/fancybox/source/jquery.fancybox.css" rel="stylesheet">
  <link href="assets/plugins/owl.carousel/assets/owl.carousel.css" rel="stylesheet">
  <!-- Page level plugin styles END -->

  <!-- Theme styles START -->
  <link href="assets/pages/css/components.css" rel="stylesheet">
  <link href="assets/corporate/css/style.css" rel="stylesheet">
  <link href="assets/pages/css/style-shop.css" rel="stylesheet" type="text/css">
  <link href="assets/corporate/css/style-responsive.css" rel="stylesheet">
  <link href="assets/corporate/css/themes/red.css" rel="stylesheet" id="style-color">
  <link href="assets/corporate/css/custom.css" rel="stylesheet">
  <!-- Theme styles END -->
</head>
<!-- Head END -->

<!-- VISTA HEADER -->
  <div ng-include="'header.html'">
   </div>
   <!-- FIN VISTA HEADER -->

<!-- Body BEGIN -->
<body class="ecommerce" ng-controller="AccountController">       
    
    <div class="main">
      <div class="container">
        <ul class="breadcrumb">
            <li><a href="shop-index.html">Inicio</a></li>
            <li><a href="">Store</a></li>
            <li class="active">Mi Cuenta</li>
        </ul>
        <!-- BEGIN SIDEBAR & CONTENT -->
        <div class="row margin-bottom-40">
          <!-- BEGIN SIDEBAR -->
          <div class="sidebar col-md-3 col-sm-3">
            <ul class="list-group margin-bottom-25 sidebar-menu">
              <li class="list-group-item clearfix" ng-click="selectTab('addressesBook')"><a href=""><i class="fa fa-angle-right"></i>Libreta de Direcciones</a></li>
              <li class="list-group-item clearfix" ng-click="selectTab('changeProfile')"><a href=""><i class="fa fa-angle-right"></i>Cambiar Datos Perfil</a></li>
              <li class="list-group-item clearfix" ng-click="selectTab('myPurchases')"><a href=""><i class="fa fa-angle-right"></i>Mis Compras</a></li>
              <li class="list-group-item clearfix" ng-click="selectTab('myCreditCards')"><a href=""><i class="fa fa-angle-right"></i>Mis Tarjetas</a></li>
			        <li class="list-group-item clearfix" ng-click="selectTab('accountState')"><a href=""><i class="fa fa-angle-right"></i>Estado de Cuenta</a></li>
              <li class="list-group-item clearfix" ng-click="selectTab('...')"><a href=""><i class="fa fa-angle-right"></i>...</a></li>
              <li class="list-group-item clearfix" ng-click="logOut()"><a href=""><i class="fa fa-angle-right"></i>Cerrar Sesion</a></li>
            </ul>
          </div>
          <!-- END SIDEBAR -->

        <div class="col-md-9 col-sm-7">
        <div ng-show="selectedTab=='addressesBook'">
           <h1>LIBRETA DE DIRECCIONES</h1> 
           <div align="right"><button type="submit" class="btn btn-primary" ng-click="openAddressModal()">Agregar Direccion</button></div>
         </br>
            <div class="goods-page">
              <div class="goods-data clearfix">
                <div class="table-wrapper-responsive">
                <table summary="Shopping cart">
                  <tr>
                    <th >Direccion</th>
                    <th >Telefono</th>
                  </tr>
                  <tr ng-repeat="address in addresses | filter:{active:true} track by $index">
                      <td >
                        <h3>{{address.street}} {{address.number}}</h3>
                        <p>{{address.city}} - C.P.: {{address.zipCode}}</p>
                        <em>{{address.idProvince.name}}</em>
                      </td>
                      <td >
                        <p>{{address.phone}}</p>
                        <p>{{address.mobilePhone}}</p>
                      </td>
                      </td>
                      <td class="del-goods-col">
                        <a class="del-goods" href="" ng-click="removeAddress(address)">&nbsp;</a>
                        <a class="upd-goods" href="" ng-click="editAddressModal(address)">&nbsp;</a>
                      </td>
                  </tr>
                </table>
                </div>
              </div>
            </div>
          </div> <!---ng-show-->  
        <div ng-show="selectedTab=='myPurchases'">
            <h1>MIS COMPRAS</h1>
            <div class="goods-page">
              <div class="goods-data clearfix">
                <div class="table-wrapper-responsive">
                  <table summary="Shopping cart">
                  <tr>
                    <th class="goods-page-description">Nro.</th>
                    <th class="goods-page-description">Descripcion</th>
                    <th class="goods-page-description">Fecha</th>
                    <th class="goods-page-description">Estado</th>
                    <th class="goods-page-price" colspan="2">Monto total</th>
                  </tr>
                  <tr ng-repeat="purchase in myPurchases track by $index">
                    <td class="goods-page-description">
                      {{purchase.id}} 
                    </td>                    
                    <td class="goods-page-description" >
                      <accordion>
                          <accordion-group>
                            <accordion-heading >
                              Ver Detalle
                            </accordion-heading>
                          <div class="panel-body">
                              <table style="border-collapse: separate; border-spacing: 10px;">
                               <tr>
                                <th class="goods-page-description">Item</th>
                                <th class="goods-page-description">Color</th>
                                <th class="goods-page-description">Talle</th>
                                <th class="goods-page-description">Cant.</th>
                                <th class="goods-page-description">Precio Unit.</th>
                              </tr>
                              <tr ng-repeat="detail in purchase.description track by $index">
                                  <td class="goods-page-description">
                                    <strong><a>{{detail.name}}</a></strong>
                                  </td> 
                                  <td class="goods-page-description">
                                    {{detail.color}}
                                  </td> 
                                  <td class="goods-page-description">
                                    {{detail.size}} 
                                  </td> 
                                  <td class="goods-page-description">
                                    {{detail.quantity}}
                                  </td> 
                                  <td class="goods-page-description">
                                    ${{detail.unitPrice}}
                                  </td> 
                              </tr>
                            </table>
                          </div>
                          </accordion-group>
                        </accordion>
                    </td>
                    <td class="goods-page-stock">
                      {{purchase.date.split(" ")[0]}}
                    </td>
                    <td class="goods-page-stock">
                      {{purchase.state}}
                        <!--<select ng-options="item as item.description for item in purchaseStates track by item.id" ng-model="purchase[0].idState"></select>-->
                    </td>
                    <td class="goods-page-price">
                      <strong><span>$</span>{{purchase.totalAmount}}</strong>
                    </td>
                    <td class="del-goods-col">                        
                        <button class="btn btn-primary pull-right" type="submit" id="button-confirm" ng-click="sendAgain(purchase)" ng-disabled="!allowNewSend(purchase)">Pedir de nuevo</button> 
                        <button class="btn btn-primary pull-right" type="submit" id="button-confirm" ng-click="cancelPurchase(purchase)" ng-disabled="allowCancelPurchase(purchase)">Cancelar</button>
                        <button class="btn btn-primary pull-right" type="submit" id="button-confirm" ng-click="Pay(purchase.link)" ng-disabled="verifyLink(purchase.link)">Pagar</button> 
                    </td>
                  </tr>
                </table>
                </div>
              </div>
            </div>
          </div> <!---ng-show-->  
          <div ng-show="selectedTab=='myCreditCards'">
            <h1>MIS TARJETAS</h1>
            <div align="right"><button type="submit" class="btn btn-primary" ng-click="openCreditCardModal()">Agregar Tarjeta</button></div>
            <div class="goods-page">
              <div class="goods-data clearfix">
                <div class="table-wrapper-responsive">
                  <table summary="Shopping cart">
                  <tr>
                    <th class="goods-page-description">Número</th>
                    <th class="goods-page-description">Banco</th>
                    <th class="goods-page-description">Tarjeta</th>
                    <th class="goods-page-description">Nombre</th>
                    <th class="goods-page-description">CVV</th>
                    <th class="goods-page-description">Vencimiento</th>
                  </tr>
                  <tr ng-repeat="creditCard in myCreditCards | filter:{active:true} track by $index ">
                    <td>{{creditCard.number}}</td>
                    <td>{{creditCard.idBankCard.idBank.name}}</td>
                    <td>{{creditCard.idBankCard.idCard.name}}</td>
                    <td>{{creditCard.name}}</td>
                    <td>{{creditCard.cvv}}</td>
                    <td>{{creditCard.expirationDate.date | dateFilter}}</td>
                    <td class="del-goods-col">
                        <a class="del-goods" href="" ng-click="removeCreditCard(creditCard)">&nbsp;</a>
                        <a class="upd-goods" href="" ng-click="editCreditCardModal(creditCard)">&nbsp;</a>
                    </td>
                  </tr>
                </table>
                </div>
              </div>
            </div>
          </div> <!---ng-show--> 

          <div ng-show="selectedTab=='...'">
            <a href="oca-interface.html">OCA INTERFACE</a>
          </div>


          <div ng-show="selectedTab=='accountState'">
            <h1>ESTADO DE CUENTA</h1>
            <div ng-show="!user.blacklist">USTED NO ESTÁ EN LISTA NEGRA<br><br></div>
            <div ng-show="user.blacklist">USTED ESTÁ EN LISTA NEGRA<br><br></div>
            
            <div class="goods-page">
              <div class="goods-data clearfix">
                <div class="table-wrapper-responsive">
                  <table summary="Shopping cart">
                  <tr>
                    <th class="goods-page-description">Nº de compra</th>
                    <th class="goods-page-price">Precio Total</th>
                    <th class="goods-page-description">Día</th>
                    <th class="goods-page-price" colspan="2">Costo de envío</th>
                  </tr>
                  <tr ng-repeat="blacklistSale in blacklistSales | filter:{active:true} track by $index ">
                    <td class="goods-page-description">{{blacklistSale.idSale.saleNumber}}</td>
                    <td class="goods-page-description">${{blacklistSale.idSale.price}}</td>
                    <td class="goods-page-description">{{blacklistSale.idSale.date.date | dateFilter2}}</td>
                    <td class="goods-page-price"><strong><span>$</span>{{blacklistSale.idSale.shippingCost}}</strong></td>
                  </tr>
                </table>
                </div>
              </div>
            </div>
            <div class="goods-page-price">
                <strong>Deudas:  <span>$</span>{{shippingCostTotal}}</strong><br>
                <strong>Impuestos (5% del precio total): <span>$</span>{{impuestosTotal}}</strong><br>
                <strong>MONTO A PAGAR: <span>$</span>{{deudaTotal}}</strong><br><br>
            </div>

            <div class="col-xs-4 col-sm-5 col-md-6 col-lg-6">
              <div class="form-group">
                <label for="bank">Tarjeta<span class="require">*</span></label>
                <select class="form-control" id="blacklistCreditCard" ng-model="blacklistCreditCard" name="blacklistCreditCard" 
                  ng-options="creditCard.number for creditCard in myCreditCards track by creditCard.id" required>
                </select>
              </div>
            </div><!-- /.col-xs-4 col-sm-5 col-md-6 col-lg-6 -->

            <br><br><br><br>
            <div align="right"><button type="submit" class="btn btn-primary" ng-disabled="deudaTotal==0 || blacklistCreditCard==undefined" ng-click="pagarBlacklist(blacklistCreditCard)">PAGAR</button></div>
          </div> <!---ng-show--> 
          <div ng-show="selectedTab=='changeProfile'">
            <div ng-controller="SubCtrlAdmin_EditProfile"><!--SI, USA EL DE ADMIN PARA NO REPETIR CODIGO-->
              <h1>CAMBIAR DATOS PERFIL</h1>
                <form id="userModal"  enctype="multipart/form-data" name="userForm" novalidate>
                    <div class="panel-body row">
                      <div class="col-md-6 col-sm-6">
                        <div class="form-group">
                          <label for="name">Nombre <span class="require">*</span></label>
                          <input type="text" ng-pattern="/^[a-zA-Z\_\- ]*$/" ng-minlength="3" name="name" id="name" class="form-control" ng-model="user.name" required>
                          <div ng-show="userForm.name.$error.pattern">Solo letras y espacios</div>
                          <div ng-show="userForm.name.$error.minlength">Mínimo tres letras</div>
                          <div ng-show="userForm.name.$error.required">Requerido</div>
                        </div>
                        <div class="form-group">
                          <label for="surname">Apellido <span class="require">*</span></label>
                          <input type="text" id="surname" name="surname" class="form-control" ng-pattern="/^[a-zA-Z\_\- ]*$/" ng-minlength="3" ng-model="user.surname">
                          <div ng-show="userForm.surname.$error.pattern">Solo letras y espacios</div>
                          <div ng-show="userForm.surname.$error.minlength">Mínimo tres letras</div>
                          <div ng-show="userForm.surname.$error.required">Requerido</div>
                        </div>
                        <div class="form-group">
                          <label for="email">E-Mail <span class="require">*</span></label>
                          <input type="email" id="email" name="email" class="form-control" ng-model="user.email" required>
                          <div ng-show="userForm.email.$error.email">Debe ser formato mail</div>
                          <div ng-show="userForm.email.$error.required">Requerido</div>
                        </div>
                        <h3>Contraseña</h3>
                        <div class="form-group">
                          <label for="password">Contraseña <span class="require">*</span></label>
                          <input type="password" id="password" name="password" class="form-control" ng-minlength="6" ng-model="user.password" required>
                          <div ng-show="userForm.password.$error.minlength">Mínimo seis letras</div>
                          <div ng-show="userForm.password.$error.required">Requerido</div>
                        </div>
                        <div class="form-group">
                          <label for="password-confirm">Confirmar Contraseña <span class="require">*</span></label>
                          <input type="password" id="passwordConfirm" name="passwordConfirm" class="form-control" data-password-verify="user.password" 
                                  ng-init="user.passwordConfirm = user.password" ng-model="user.passwordConfirm" required>
                          <div ng-show="userForm.passwordConfirm.$error.passwordVerify">Fields are not equal!</div>
                        </div> 
                     </div>
                      <div class="col-md-6 col-sm-6">
                        <div class="form-group">
                          <label for="birthdate">Fecha de Nacimiento</label>
                          <input type="date" id="birthdate" name="birthdate" ng-model="user.birthDate" class="form-control" max="{{hace18 | date:'yyyy-MM-dd'}}" required>
                          <div ng-show="userForm.birthdate.$error.required">Requerido</div>
                        </div>
                        <label for="gender">Genero</label>                     
                        <div class="checkbox">
                          <label>
                            Masculino <input type="radio" ng-model="user.gender" value="Masculino">
                          </label>
                          <label>
                            Femenino <input type="radio" ng-model="user.gender" value="Femenino">
                          </label>
                        </div>
                      </div>
                      <hr>
                      <div class="col-md-12">                      
                        <button class="btn btn-primary" type="button" ng-click="updateProfile(user)" ng-disabled="userForm.$invalid">Guardar</button>                     
                      </div>
                    </div>
                </form>
              </div>
          </div> 
          
        </div>        
        </div>
        <!-- END SIDEBAR & CONTENT -->
      </div>
    </div>


        <!-- VISTA FOOTER -->
    <div ng-include="'footer.html'"></div>
    <!-- FIN VISTA FOOTER -->

    <!-- Load javascripts at bottom, this will reduce page load time -->
    <!-- BEGIN CORE PLUGINS(REQUIRED FOR ALL PAGES) -->
    <!--[if lt IE 9]>
    <script src="assets/plugins/respond.min.js"></script>  
    <![endif]-->  
    <script src="assets/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="assets/plugins/jquery-migrate.min.js" type="text/javascript"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>      
    <script src="assets/corporate/scripts/back-to-top.js" type="text/javascript"></script>
    <script src="assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
    <!-- END CORE PLUGINS -->

    <!-- BEGIN PAGE LEVEL JAVASCRIPTS (REQUIRED ONLY FOR CURRENT PAGE) -->
    <script src="assets/plugins/fancybox/source/jquery.fancybox.pack.js" type="text/javascript"></script><!-- pop up -->
    <script src="assets/plugins/owl.carousel/owl.carousel.min.js" type="text/javascript"></script><!-- slider for products -->

    <script src="assets/corporate/scripts/layout.js" type="text/javascript"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            Layout.init();    
            Layout.initOWL();
            Layout.initTwitter();
        });
    </script>
    <!-- END PAGE LEVEL JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>