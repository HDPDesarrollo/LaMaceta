<head>
  <script src="../bower_components/angular/angular.js" type="text/javascript"></script>
  <script src="../bower_components/angular-bootstrap/ui-bootstrap.js" type="text/javascript"></script>
  <script src="../bower_components/angular-bootstrap/ui-bootstrap-tpls.js" type="text/javascript"></script>
  <script src="../bower_components/ng-table/dist/ng-table.js" type="text/javascript"></script>
  <script src="../bower_components/ng-file-upload/ng-file-upload.min.js" type="text/javascript"></script>
  <script src="../js/checklist-model.js"></script>
  <script src="../js/angular-cookies.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-animate.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-sanitize.js"></script>

  <script src="../js/app/app.js"></script>

  <script src="../js/controller/OCAController.js"></script>
  <script src="../js/service/OCAService.js"></script>
</head>

<body ng-app="LaMaceta" ng-controller="OCAController">

  <style type="text/css">
      table {
      border-collapse: collapse;
      }

      table, th, td {
          border: 1px solid black;
      }
  </style>

  <table>
    <tr>
      <th>NÃºmero de venta</th>
      <th>Estado</th>
      <th>Razon</th>
    </tr>
    <tr ng-repeat="sale in sales | filter:{state:'PENDIENTE'} track by $index">
      <td>{{sale.id}}</td>
      <td>
        <select ng-model="newState">
          <option value="4">Finalizado</option>
          <option value="3">Rechazado</option>
        </select>
      </td>
      <td>
        <select ng-model="motive" ng-show="newState==3">
          <option value="No estaba presente">No estaba presente</option>
          <option value="Rechazo expreso">Rechazo expreso</option>
          <option value="No existe domicilio">No existe domicilio</option>
        </select>
      </td>
      <td><button ng-click="editSale(sale, newState, motive)" ng-disabled="newState==null || esperar==1">Cambiar</button></td>
    </tr>
  </table>
  <button ng-click="refresh()">Actualizar</button>
  <br>
  <div ng-show='esperar==1'>ESPERE A QUE SE TERMINE DE PROCESAR</div>
</body>

